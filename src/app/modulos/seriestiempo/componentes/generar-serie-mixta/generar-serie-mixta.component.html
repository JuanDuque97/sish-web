
<div class="row text-right sish-miga-de-pan">
    <div class="col-md-12 text-right">
        <ol class="breadcrumb float-sm-right sish-miga-de-pan">
            <li class="breadcrumb-item active">Configuración</li>
            <li class="breadcrumb-item">{{'aforosCorrientes'|translate}}
            </li>
        </ol>
    </div>
</div>
<div class="container-fluid bg-white pt-5">
    <div class="row">
        <div class="col-md-12">
            <h2 class="sish-titulo-formulario text-center">Generar series mixtas
            </h2>
        </div>
    </div>
    <div
    >


    <br>

 </div>

    <div class="row">
        <form class="sish-form" #ngForm="ngForm" [formGroup]="formularioFiltros" (ngSubmit)="filtrar(idTipoElemento)" novalidate>
            
            <div class="center"> 
    
                <div class="text-center form-group col-xl-12 col-lg-12 col-md-12 col-sm-12 " width="100%">
                    <h2 class="sish-titulo-formulario"> {{"Método de correlación"|translate}} </h2>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio"  formControlName="metodoid" 
                            [(ngModel)]="metodo" name="elemento" id="elemento" value="1" checked>
                        <label class="form-check-label" for="inlineRadio1">{{"Spearman"|translate}}</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio"  formControlName="metodoid" 
                            [(ngModel)]="metodo" name="elemento" id="elemento" value="2" checked>
                        <label class="form-check-label text-center"
                            for="inlineRadio2">{{"Kendall-Tau"|translate}}</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio"  formControlName="metodoid" 
                            [(ngModel)]="metodo" name="elemento" id="elemento" value="3" checked>
                        <label class="form-check-label text-center"
                            for="inlineRadio2">{{"Pearson"|translate}}</label>
                    </div>
                    <p *ngIf="ngForm.submitted && metodo==0" class="error">
                        <sup>*</sup> {{ "Medoto de correlación " | translate }}   {{ "obligatoria" |  translate }}
                    </p>
                </div>
              
            
            
            </div>


            <div class="row" width="100%">
                <label>{{ ' Información origen ' | translate }}</label>
                <div class="col-xl-3 col-lg-4 col-md-4 col-sm-12">
                    <div class="form-group">
                        <label> Tipo elemento *</label>
                        <ng-select2 name="nombreElemento" [data]="listaElementos"    formControlName="idTipoElemento" (ngModelChange)="obtenerElementos($event)" [width]="'100%'" placeholder="{{ 'Seleccionar' | translate }}...">
                        </ng-select2>
                      
                      
                    </div> 
                    <div class="form-group" >
                        <label> {{ 'codigo' | translate }} IDEAM</label>
                        <ng-select2 name="codigoIDEAM" [data]="listaCodigoIDEAM"  [disabled]="!idTipoElemento"  [(ngModel)]="idElemento" formControlName="idCodigoIDEAM" [width]="'100%'" placeholder="{{ 'Seleccionar' | translate }} {{
                     ' codigo IDEAM' | translate
                     }}...">
                        </ng-select2>
                        <p *ngIf="ngForm.submitted && idElemento=='0'" class="error">
                            <sup>*</sup> {{ "codigo IDEAM" | translate }}   {{ "obligatoria" |  translate }}
                        </p>
                    </div>     
                </div>                
                    <div class="col-xl-3 col-lg-4 col-md-4 col-sm-12">
               
                    <div class="form-group" >
                        <label> {{ 'codigo' | translate }} EAAB</label>
                        <ng-select2 name="CodigoEAAB" formControlName="idCodigoEAAB"  [disabled]="idTipoElemento !=466" [data]="listaCodigoEAAB" [(ngModel)]="idElemento" [width]="'100%'" placeholder="{{ 'Seleccionar' | translate }} {{
             '  codigo EAAB' | translate
             }}...">
                        </ng-select2>
                        <p *ngIf="ngForm.submitted && idElemento=='0'" class="error">
                            <sup>*</sup> {{ "codigo EAAB" | translate }}   {{ "obligatoria" |  translate }}
                        </p>
                    </div> 
                     <div class="form-group">
                        <label> {{ 'Nombre' | translate }} Elemento *</label>
                        <ng-select2 name="nombreElemento"  (ngModelChange)="agregarElementoOrigen($event)" (ngModelChange)="obtenerListaParametros($event)"   [data]="listaElemento" formControlName="idElemento" [(ngModel)]="idElemento" [width]="'100%'" placeholder="{{ 'Seleccionar' | translate }}..." [disabled]="!idTipoElemento">
                        </ng-select2>
                        <p *ngIf="ngForm.submitted && idElemento=='0'" class="error">
                            <sup>*</sup> {{ "Nombre Elemento" | translate }}   {{ "obligatoria" |  translate }}
                        </p>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-4 col-md-4 col-sm-12">
                    <div class="form-group">
                        <label>{{ 'Parámetro'|translate}} *</label>
                        <ng-select2   name="idParametro"  (ngModelChange)="obtenerPorFrecuencia(idParametro)"  [data]="listParametro" [(ngModel)]="parametro" formControlName="idParametro" [width]="'100%'" placeholder="{{'Seleccionar'|translate}} {{'parametro'|translate}}...">
                        </ng-select2>
                        <p *ngIf="ngForm.submitted && idParametro!.invalid" class="error">
                            <sup>*</sup> {{ "Parámetro" | translate }}   {{ "obligatoria" |  translate }}
                        </p>
                    </div>
                    <div class="form-group">

                        <label> {{ 'frecuencia' | translate }} * </label>
                        <ng-select2 name="idFrecuencia" [data]="listaFrecuencia"  [disabled]="listaCorrelacion.length > 0" [(ngModel)]="idfrecuencia" formControlName="frecuencia"  [width]="'100%'" placeholder="{{ 'Seleccionar' | translate }} {{
                     ' frecuencia' | translate 
                     }}...">
                        </ng-select2>
                        <p *ngIf="ngForm.submitted && idfrecuencia== 0" class="error">
                            <sup>*</sup> {{ "frecuencia" | translate }}   {{ "obligatoria" |  translate }}
                        </p>

                    </div>

                </div>
               
                <div class="col-xl-3 col-lg-4 col-md-4 col-sm-12">
             
                    <div class="form-group col-xl-12 col-lg-12 col-md-12 col-sm-12">
                        <label>Periodo {{' desde'|translate}} </label>
                        <input type="date" class="form-control" formControlName="fechaInicio" name="fechaInicio" />
                        <p *ngIf="ngForm.submitted && fechaInicio!.invalid" class="error">
                            <sup>*</sup> {{ "Fecha Inicio" | translate }}   {{ "obligatoria" |  translate }}
                        </p>
                    </div>
                    <div class="form-group col-xl-12 col-lg-12 col-md-12 col-sm-12">
                        <label>Periodo {{' hasta'|translate}} </label>
                        <input type="date" class="form-control" formControlName="fechaFin" name="fechaFin" />
                        <p *ngIf="ngForm.submitted && fechaFin!.invalid" class="error">
                            <sup>*</sup> {{ "Fecha Fin" | translate }}   {{ "obligatoria" |  translate }}
                        </p>
                    </div>
                   
                </div>
               
              
                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">
                    <label>{{ 'Elementos reprentativos' | translate }}</label>
                 
                    <br>

                    <div class="form-group" >
                        <label> {{ 'codigo' | translate }} IDEAM</label>
                        <ng-select2 name="listaCodigoIDEAMAgregar" [data]="listaCodigoIDEAMAgregar"   [disabled]="!idTipoElemento"  [(ngModel)]="idElementoAgregar"  formControlName="idCodigoIDEAMAgregar" [width]="'100%'" placeholder="{{ 'Seleccionar' | translate }} {{
                     ' codigo IDEAM' | translate
                     }}...">
                        </ng-select2>
                        <p *ngIf="ngForm.submitted && idElementoAgregar==0"  class="error">
                            <sup>*</sup> {{ "codigo IDEAM" | translate }}   {{ "obligatoria" |  translate }}
                        </p>
                        
                    </div>                   

                    <div class="form-group" >
                        <label> {{ 'codigo' | translate }} EAAB</label>
                        <ng-select2 name="idCodigoEAABAgregar" formControlName="idCodigoEAABAgregar"   [disabled]="idTipoElemento !=466" [data]="listaCodigoEAABAgregar" [(ngModel)]="idElementoAgregar" [width]="'100%'" placeholder="{{ 'Seleccionar' | translate }} {{
                        ' codigo EAAB' | translate
                        }}...">
                        </ng-select2>
                        <p *ngIf="ngForm.submitted && idElementoAgregar==0"  class="error">
                            <sup>*</sup> {{ "codigo EAAB" | translate }}   {{ "obligatoria" |  translate }}
                        </p>
                    </div> 

                     <div class="form-group">
                        <label> {{ 'Nombre' | translate }} elemento *</label>
                        <ng-select2 name="listaElementoAgregar" [data]="listaElementoAgregar" 
                         [disabled]="!idTipoElemento"   formControlName="idElementoA"   (ngModelChange)="obtenerListaParametrosAgregar($event)"   [(ngModel)]="idElementoAgregar" [width]="'100%'" placeholder="{{ 'Seleccionar' | translate }}..." >
                        </ng-select2>
                        <p *ngIf="ngForm.submitted && idElementoAgregar==0"  class="error">
                            <sup>*</sup> {{ "Fecha Inicio" | translate }}   {{ "obligatoria" |  translate }}
                        </p>
                       
                    </div>
                   
                    <div class="form-group text-center"> 
                        <a class="sish-boton-verde" title="Agregar">
                            <em class="fas fa-plus-circle"   (click)="agregarElemento()"> </em>
                        </a>
                    </div>
                    <div class="form-group text-center">
                        <table datatable class="sish-tabla">
                            <thead>
                                <tr>
                                    <th scope="col">ID </th>
                                    <th scope="col">Código estación IDEAM </th>
                                    <th scope="col">Código estación EAAB </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="text-center">
                                    <tr class="text-center"   *ngFor="let dato of listaItemsElementos">
        
                                        <th scope="row"> {{dato.codigoEAAB}} </th>
                                        <th scope="row"> {{dato.codigoIDEAM }} </th>
                                        <th scope="row"> {{dato.nombreElemento }} </th>
                                    </tr>
                            </tbody>
                        </table>
                    </div>
                </div>


                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">
                    <label >{{ 'Parametros correlación' | translate }}</label>
                    <div class="form-group">
                        <label>{{ 'Parámetro'|translate}}</label>
                        <ng-select2 name="tipo" [data]="listParametroOrgin" [disabled]="!parametro"  (ngModelChange)="obtenerPorFrecuenciaA()"  [(ngModel)]="parametroAgregar" formControlName="idParametroAgregar" [width]="'100%'" placeholder="{{'Seleccionar'|translate}} {{'parametro'|translate}}...">
                        </ng-select2>
                        <p *ngIf="ngForm.submitted && parametroAgregar==0"  class="error">
                            <sup>*</sup> {{ "Parámetro" | translate }}   {{ "obligatoria" |  translate }}
                        </p>
                        
                    </div>
                

                    <div class="form-group">

                        <label> {{ 'frecuencia' | translate }} * </label>
                        <ng-select2 name="idFrecuencia" [data]="listaFrecuencia"  [disabled]="listaCorrelacion.length > 0" [(ngModel)]="idfrecuencia" formControlName="frecuenciaAgregar"  [width]="'100%'" placeholder="{{ 'Seleccionar' | translate }} {{
                     ' frecuencia' | translate 
                     }}...">
                        </ng-select2>
                        <p *ngIf="ngForm.submitted && idfrecuencia== 0" class="error">
                            <sup>*</sup> {{ "frecuencia" | translate }}   {{ "obligatoria" |  translate }}
                        </p>

                    </div>
                    <div class="mt-lg-6">

                    </div>
                    <div class="form-group text-center"> 
                        <a class="sish-boton-verde" title="Agregar">
                            <em class="fas fa-plus-circle" (click)="agregarCorrelacion()"> </em>
                        </a>
                    </div>
                    <div class="form-group text-center">
                        <table datatable class="sish-tabla">
                            <thead>
                                <tr>
                                    <th scope="col">ID </th>
                                    <th scope="col">Parámetro </th>
                                    <th scope="col">Frecuencia </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="text-center">
                                    <tr class="text-center" *ngFor="let dato of listaCorrelacion">
        
                                        <th scope="row"> {{dato.id}} </th>
                                        <th scope="row"> {{dato.parametro }} </th>
                                        <th scope="row"> {{dato.frecuencia }} </th>
                                    </tr>
                            </tbody>
                        </table>
                    </div>
                </div>


                
                <!--BOTONES-->
                <div class="row">
                    <div class="form-group col-xl-12 col-lg-6 col-sm-12">
                        <div class="btn-group mr-2" role="group" aria-label="First group">
                            <button type="submit" class="sish-boton-confirmar"> 
                {{ 'Botones.consultar' | translate }}
                </button>
                <button type="button" class="sish-boton-cancelar"    (click)="cancelar()"  > 
                    {{ 'Botones.limpiar' | translate }}
                    </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div>
   
   <div  *ngIf="vergrafica" class="row">
         
        <div  *ngIf="grafica1" class="row">
            
                    <highcharts-chart *ngIf="grafica0" 
                    [Highcharts]="Highcharts"
                    [options]="chartOptions00"
                    [(update)]="updateFlag"
                        >
                        </highcharts-chart>


                        <div  id="serie" class=" text-center  col-xl-12 col-lg-12 col-md-12 col-sm-12 "> </div>


        </div>
 
            
            <div  *ngIf="grafica1" class="row">
            
            
                <highcharts-chart 
                [Highcharts]="Highcharts"
                [options]="chartOptions"
                [(update)]="updateFlag"
            >
            </highcharts-chart>
            
            <div  id="serie1" class=" text-center  col-xl-12 col-lg-12 col-md-12 col-sm-12 "> </div>

        </div>

       
            <div  *ngIf="grafica2"  class="row mt-5">  

                
                    <highcharts-chart 
                    [Highcharts]="Highcharts0"
                    [options]="chartOptions0"
                    [(update)]="updateFlag"
                >
                </highcharts-chart>
            
                <div  id="serie2" class=" text-center  col-xl-12 col-lg-12 col-md-12 col-sm-12 "> </div>


            </div>

            <div  *ngIf="grafica3"  class="row mt-5">  
                    <highcharts-chart 
                    [Highcharts]="Highcharts1"
                    [options]="chartOptions1"
                    [(update)]="updateFlag"
                >
                </highcharts-chart>
                <div  id="serie3" class=" text-center serie col-xl-12 col-lg-12 col-md-12 col-sm-12 "> </div>
                
        </div>       

        <div  *ngIf="grafica4"  class="row mt-5">  
           
            <highcharts-chart 
            [Highcharts]="Highcharts2"
            [options]="chartOptions2"
            [(update)]="updateFlag"
          >
          </highcharts-chart>
          <div  id="serie4" class=" text-center serie col-xl-12 col-lg-12 col-md-12 col-sm-12 "> </div>
          
        </div>
        <div  *ngIf="grafica5"  class="row mt-5">  
       
            <highcharts-chart 
            [Highcharts]="Highcharts3"
            [options]="chartOptions3"
            [(update)]="updateFlag"
          >
          </highcharts-chart>
    
        </div>    
            <!-- <div class=" col-10 brow d-flex justify-content-center" class="serie1"></div>  -->


    
        
        
        </div>